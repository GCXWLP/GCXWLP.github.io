<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="很无语的一次大作业bro">
<meta property="og:type" content="article">
<meta property="og:title" content="记一次python大作业">
<meta property="og:url" content="http://example.com/2025/05/12/%E8%AE%B0%E4%B8%80%E6%AC%A1python%E5%A4%A7%E4%BD%9C%E4%B8%9A/index.html">
<meta property="og:site_name" content="3a0-Eminem">
<meta property="og:description" content="很无语的一次大作业bro">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-05-12T13:15:09.000Z">
<meta property="article:modified_time" content="2025-05-21T05:25:42.688Z">
<meta property="article:author" content="3a0-Eminem">
<meta property="article:tag" content="日常生活">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2025/05/12/%E8%AE%B0%E4%B8%80%E6%AC%A1python%E5%A4%A7%E4%BD%9C%E4%B8%9A/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>记一次python大作业 | 3a0-Eminem</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">3a0-Eminem</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2025/05/12/%E8%AE%B0%E4%B8%80%E6%AC%A1python%E5%A4%A7%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="3a0-Eminem">
      <meta itemprop="description" content="No Human is Limited">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="3a0-Eminem">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          记一次python大作业
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2025-05-12 21:15:09" itemprop="dateCreated datePublished" datetime="2025-05-12T21:15:09+08:00">2025-05-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-05-21 13:25:42" itemprop="dateModified" datetime="2025-05-21T13:25:42+08:00">2025-05-21</time>
              </span>

          
            <div class="post-description">很无语的一次大作业bro</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="bro这么久不更新，不练题，是去做什么去了，原来是去做beyond-python大作业去了，罢了罢了，来看看成果吧"><a href="#bro这么久不更新，不练题，是去做什么去了，原来是去做beyond-python大作业去了，罢了罢了，来看看成果吧" class="headerlink" title="bro这么久不更新，不练题，是去做什么去了，原来是去做beyond python大作业去了，罢了罢了，来看看成果吧"></a>bro这么久不更新，不练题，是去做什么去了，原来是去做beyond python大作业去了，罢了罢了，来看看成果吧</h3><h4 id="第一题，百度图片爬虫-这个喷不了，只要在框架上改改就可以-因为懒，一直没写多线程"><a href="#第一题，百度图片爬虫-这个喷不了，只要在框架上改改就可以-因为懒，一直没写多线程" class="headerlink" title="第一题，百度图片爬虫,这个喷不了，只要在框架上改改就可以(因为懒，一直没写多线程)"></a>第一题，百度图片爬虫,这个喷不了，只要在框架上改改就可以(因为懒，一直没写多线程)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image,ImageFont,ImageDraw</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_url</span>(<span class="params">page,key_word</span>):</span><br><span class="line">    original_url=<span class="string">&quot;https://image.baidu.com/search/acjson&quot;</span></span><br><span class="line">    body=&#123;<span class="string">&#x27;tn&#x27;</span>:<span class="string">&#x27;resultjson_com&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;word&#x27;</span>:key_word,</span><br><span class="line">          <span class="string">&#x27;ie&#x27;</span>:<span class="string">&#x27;utf-8&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;fp&#x27;</span>:<span class="string">&#x27;result&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;fr&#x27;</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;ala&#x27;</span>:<span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;applid&#x27;</span>:<span class="string">&#x27;&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;pn&#x27;</span>:<span class="number">30</span>*page,</span><br><span class="line">          <span class="string">&#x27;rn&#x27;</span>:<span class="number">30</span>,</span><br><span class="line">          <span class="string">&#x27;nojc&#x27;</span>:<span class="number">0</span>,</span><br><span class="line">          <span class="string">&#x27;gsm&#x27;</span>:<span class="built_in">hex</span>(page*<span class="number">30</span>)[<span class="number">2</span>:],</span><br><span class="line">          <span class="string">&#x27;newReq&#x27;</span>:<span class="number">1</span>,</span><br><span class="line">         &#125;</span><br><span class="line"><span class="comment"># 按照上次搜狗的规律，不加header头强打，发现触发百度的反爬机制，于是得在这里补上一个header头，cookie直接F12抄下来就可以了，ua头网上一大堆,再次强打仍被反爬，查询资料后加上host</span></span><br><span class="line">    header=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/125.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>:<span class="string">&quot;BAIDUID_BFESS=E806634726C41BE45E14B222E8C48E10:FG=1;H_WISE_SIDS=62325_62865_62968_63034_63161;&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Host&quot;</span>:<span class="string">&quot;image.baidu.com&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Referer&quot;</span>: <span class="string">&quot;https://image.baidu.com/&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    r=requests.get(url=original_url,params=body,headers=header)</span><br><span class="line">    soup=BeautifulSoup(r.text,<span class="string">&quot;html.parser&quot;</span>).prettify()</span><br><span class="line"><span class="comment">#用美丽汤来美化一下爬取下来的内容，看一下图片标题和url对应的键是什么，直接正则搜图片的标题和对应的url</span></span><br><span class="line">    title=<span class="string">r&#x27;&quot;titleShow&quot;:\s*&quot;((?:\\&quot;|[^&quot;])*)&quot;&#x27;</span></span><br><span class="line">    picUrl=<span class="string">r&#x27;&quot;objurl&quot;:\s*&quot;((?:\\&quot;|[^&quot;])*)&quot;&#x27;</span></span><br><span class="line"><span class="comment">#这里我也修改过了，我原先写的正则表达式(例如：itle=r&#x27;&quot;titleShow&quot;:\s*&quot;([^&quot;]+)&quot;&#x27;)不够健壮</span></span><br><span class="line"><span class="comment">#后面试运行的时候发现还是不够健壮，有的广告链居然也用objurl，这里为了不发生这种错误，我还是直接进行正则过滤，只匹配url末尾是jpg或png的内容，失败了，换回原来的正则表达式，看来这里的广告比我想象的要顽强</span></span><br><span class="line">    pic_url=re.findall(picUrl,soup)</span><br><span class="line">    title1=re.findall(title,soup)</span><br><span class="line">    <span class="built_in">dict</span>=&#123;k:v <span class="keyword">for</span> k,v <span class="keyword">in</span> <span class="built_in">zip</span>(pic_url,title1)&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">dict</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shuiyin</span>(<span class="params">path,text,x1,y1,font_path=<span class="literal">None</span>,font_size=<span class="number">36</span>,opacity=<span class="number">128</span>,margin=<span class="number">10</span></span>):</span><br><span class="line">    img=Image.<span class="built_in">open</span>(path).convert(<span class="string">&quot;RGBA&quot;</span>)<span class="comment">#按照手册上的，先转换为RGBA模式</span></span><br><span class="line">    txt=Image.new(<span class="string">&#x27;RGBA&#x27;</span>,img.size,(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0</span>))<span class="comment">#然后创建与原图同尺寸的透明画布，再初始化</span></span><br><span class="line">    draw=ImageDraw.Draw(txt)</span><br><span class="line">    <span class="keyword">if</span> font_path <span class="keyword">and</span> os.path.exists(font_path):</span><br><span class="line">        font=ImageFont.truetype(font_path,font_size)<span class="comment">#这里给用户一个自定义字体的选择，要是不自定义的话就直接进入else的try语句执行，用默认字体库</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            font=ImageFont.truetype(<span class="string">r&quot;C:\Windows\Fonts\msyh.ttc&quot;</span>,font_size)<span class="comment">#这里用支持中文的微软雅黑，不然我的姓名班级写不上去</span></span><br><span class="line">        <span class="keyword">except</span> IOError:</span><br><span class="line">                font=ImageFont.load_default()</span><br><span class="line">    draw.text((x1,y1),text,font=font,fill=(<span class="number">255</span>,<span class="number">0</span>,<span class="number">0</span>,opacity))<span class="comment">#红色波长最长，就用红色好了，这里可以自己选择想要的水印的位置的x,y坐标</span></span><br><span class="line">    watermarked=Image.alpha_composite(img,txt)<span class="comment">#将水印和原图合成，变为带水印的图</span></span><br><span class="line">    watermarked=watermarked.convert(<span class="string">&#x27;RGB&#x27;</span>)<span class="comment">#这里从rgba变为rgb，去掉透明模式</span></span><br><span class="line">    watermarked.save(path)<span class="comment">#直接覆盖原图，原图留着也没什么用</span></span><br><span class="line">cnt=<span class="number">0</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">single_download</span>(<span class="params">url,title,dir_saving,watertxt,x1,y1,font_path=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">global</span> cnt</span><br><span class="line">    url=url.encode().decode(<span class="string">&quot;unicode_escape&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(url)</span><br><span class="line">    title=title</span><br><span class="line">    dir_saving=dir_saving</span><br><span class="line">    header=&#123;</span><br><span class="line">        <span class="string">&quot;User-Agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r=requests.get(url,headers=header)</span><br><span class="line">        <span class="keyword">if</span> r.status_code==<span class="number">200</span>:<span class="comment">#一般来说是只有通的时候可以下载，但是我在实操的时候，也会遇到一些响应码不是200但仍然成功下载的（内容为乱码）</span></span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span> (<span class="string">f&quot;<span class="subst">&#123;dir_saving&#125;</span>/<span class="subst">&#123;title&#125;</span>.png&quot;</span>,<span class="string">&quot;wb&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                cnt=cnt+<span class="number">1</span></span><br><span class="line">                f.write(r.content)</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">f&quot;第<span class="subst">&#123;cnt + <span class="number">1</span>&#125;</span>张图片正在下载&quot;</span>)</span><br><span class="line">            shuiyin(<span class="string">f&quot;<span class="subst">&#123;dir_saving&#125;</span>/<span class="subst">&#123;title&#125;</span>.png&quot;</span>,watertxt,font_path,x1,y1)<span class="comment">#这里直接添加水印</span></span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;重试ing&quot;</span>)</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">down_load_image</span>(<span class="params">keyword,page,dir_saving,watertxt,x1,y1,font_path=<span class="literal">None</span></span>):</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dir_saving):</span><br><span class="line">        os.makedirs(dir_saving)</span><br><span class="line">    <span class="built_in">dict</span>=get_url(page,keyword)</span><br><span class="line">    <span class="keyword">for</span> key,value <span class="keyword">in</span> <span class="built_in">dict</span>.items():</span><br><span class="line">        single_download(key,value,dir_saving,watertxt,font_path,x1,y1)<span class="comment">#这个就是最终的结合体函数了，将以上那么多内容都囊括进来</span></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    cnt=<span class="number">0</span></span><br><span class="line">    keyword=<span class="built_in">input</span>(<span class="string">&quot;keyword:&quot;</span>)</span><br><span class="line">    page=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;page:&quot;</span>))</span><br><span class="line">    dir_saving=<span class="built_in">input</span>(<span class="string">&quot;dir you want to save:&quot;</span>)</span><br><span class="line">    water_text = <span class="built_in">input</span>(<span class="string">&quot;请输入水印文字: &quot;</span>)</span><br><span class="line">    font_path = <span class="built_in">input</span>(<span class="string">&quot;请输入字体文件路径（可选，支持中文,不想用直接回车就按默认的输出):&quot;</span>)</span><br><span class="line">    x1=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;水印的x坐标&quot;</span>))</span><br><span class="line">    y1=<span class="built_in">int</span>(<span class="built_in">input</span>(<span class="string">&quot;水印的y坐标&quot;</span>))</span><br><span class="line">    down_load_image(keyword,page,dir_saving,water_text,font_path,x1,y1)</span><br></pre></td></tr></table></figure>
<h4 id="第二题GUI库编写图形化界面实现猜字谜小游戏（这个是我最想喷的，密码的，那么多内容，硬写是吧，有点意思）"><a href="#第二题GUI库编写图形化界面实现猜字谜小游戏（这个是我最想喷的，密码的，那么多内容，硬写是吧，有点意思）" class="headerlink" title="第二题GUI库编写图形化界面实现猜字谜小游戏（这个是我最想喷的，密码的，那么多内容，硬写是吧，有点意思）"></a>第二题GUI库编写图形化界面实现猜字谜小游戏（这个是我最想喷的，密码的，那么多内容，硬写是吧，有点意思）</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> messagebox, simpledialog</span><br><span class="line"><span class="comment">#这个是用于弹出提示框和输入框</span></span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="comment">#数据储存使用json的格式更加方便（其实在百度那题我就想着不用美丽汤了，因为百度的返回格式为json，直接json读取就可以了，但是题目要求必须要用bs4）</span></span><br><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> deque</span><br><span class="line"><span class="comment">#这里是因为排行榜只保留前5名使用deque(maxlen=5)可以自动在超出长度时丢弃最老元素，这里用库，否则自己写就会写爆炸（python大作业太多了）</span></span><br><span class="line"><span class="comment">#感谢baozongwi，感谢ziantt，感谢拉蒙特徐，看了他们的博客，查了很多资料，才有这份写完的作业，这题是真的难</span></span><br><span class="line">riddles=<span class="string">&quot;riddles.json&quot;</span></span><br><span class="line">rank=<span class="string">&quot;leaderboard.json&quot;</span></span><br><span class="line"><span class="comment">#定义两个json文件，这里也很容易理解这两个都是干什么的，一个是存谜语，另外一个存排行榜</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">RiddleGame</span>:</span><br><span class="line">    <span class="comment">#我直接定义一个类，用于初始化这个猜灯谜游戏界面</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,root</span>):</span><br><span class="line">        <span class="variable language_">self</span>.root=root<span class="comment">#传入的root保存为实例属性self.root</span></span><br><span class="line">        <span class="variable language_">self</span>.root.title(<span class="string">&quot;猜灯谜游戏&quot;</span>)<span class="comment">#设置标题，后续会用tkinter的title方法来进行修改</span></span><br><span class="line">        <span class="comment">#初始化游戏数据，这里我要把谜题通过gui界面输入，这里就全部初始化为None</span></span><br><span class="line">        <span class="variable language_">self</span>.score=<span class="number">10</span></span><br><span class="line">        <span class="variable language_">self</span>.current_riddle=<span class="literal">None</span></span><br><span class="line">        <span class="variable language_">self</span>.timer=<span class="literal">None</span><span class="comment">#题目里说的，这里以时间作为区分难度的关键</span></span><br><span class="line">        <span class="variable language_">self</span>.time_left=<span class="number">0</span><span class="comment">#定义玩这个猜字谜的游戏的剩余时间，就是类的初始化</span></span><br><span class="line">        <span class="variable language_">self</span>.difficulty=<span class="number">1</span><span class="comment">#定义难度的等级</span></span><br><span class="line">        <span class="comment">#这里拉一下谜题库和排行榜库，后续会定义load_riddles和load_leaderboard </span></span><br><span class="line">        <span class="variable language_">self</span>.riddles=<span class="variable language_">self</span>.load_riddles()</span><br><span class="line">        <span class="variable language_">self</span>.leaderboard=<span class="variable language_">self</span>.load_leaderboard()</span><br><span class="line">        <span class="comment">#创建界面，构造gui组件和界面显示</span></span><br><span class="line">        <span class="variable language_">self</span>.create_widgets()<span class="comment">#后续也会一起定义的，这里先对功能有一个想法</span></span><br><span class="line">        <span class="variable language_">self</span>.update_display()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_widgets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="comment">#这个函数用于界面的构建，接下来创建一个frame容器，可以拿来水平布局两个标签，一个为时间，一个为分数</span></span><br><span class="line">        <span class="variable language_">self</span>.info_frame=tk.Frame(<span class="variable language_">self</span>.root)</span><br><span class="line">        <span class="variable language_">self</span>.info_frame.pack(pady=<span class="number">10</span>)<span class="comment">#这里我就直接用默认的pack（最简单也最好用的布局方式）10像素垂直间距</span></span><br><span class="line">        <span class="variable language_">self</span>.score_label=tk.Label(<span class="variable language_">self</span>.info_frame,text=<span class="string">&quot;当前分数：10&quot;</span>)<span class="comment">#这里建立一个标签显示分数</span></span><br><span class="line">        <span class="variable language_">self</span>.score_label.pack(side=tk.LEFT,padx=<span class="number">20</span>)<span class="comment">#左右留20像素间距</span></span><br><span class="line">        <span class="variable language_">self</span>.time_label=tk.Label(<span class="variable language_">self</span>.info_frame,text=<span class="string">&quot;剩余时间：0&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.time_label.pack(side=tk.LEFT,padx=<span class="number">20</span>)</span><br><span class="line">        <span class="comment">#跟上面一样，Label方法在主窗口创建一个用来显示灯谜文字的多行标签，宽度400像素（防止文字，就是题目太长，給爆了）</span></span><br><span class="line">        <span class="variable language_">self</span>.riddle_label=tk.Label(<span class="variable language_">self</span>.root,text=<span class="string">&quot;&quot;</span>,wraplength=<span class="number">400</span>)</span><br><span class="line">        <span class="variable language_">self</span>.riddle_label.pack(pady=<span class="number">20</span>)</span><br><span class="line">        <span class="comment">#答案输入，用一个单行文本框输入答案，而且只要按回车就可以回答答案（check_answer方法后续也会定义）</span></span><br><span class="line">        <span class="variable language_">self</span>.answer_entry=tk.Entry(<span class="variable language_">self</span>.root,width=<span class="number">30</span>)</span><br><span class="line">        <span class="variable language_">self</span>.answer_entry.pack(pady=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.answer_entry.bind(<span class="string">&quot;&lt;Return&gt;&quot;</span>,<span class="variable language_">self</span>.check_answer)</span><br><span class="line">        <span class="comment">#按钮区域</span></span><br><span class="line">        <span class="variable language_">self</span>.button_frame=tk.Frame(<span class="variable language_">self</span>.root)</span><br><span class="line">        <span class="variable language_">self</span>.button_frame.pack(pady=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.start_btn=tk.Button(<span class="variable language_">self</span>.button_frame,text=<span class="string">&quot;开始游戏&quot;</span>,command=<span class="variable language_">self</span>.start_game)</span><br><span class="line">        <span class="variable language_">self</span>.start_btn.pack(side=tk.LEFT,padx=<span class="number">5</span>)</span><br><span class="line">        <span class="variable language_">self</span>.add_btn=tk.Button(<span class="variable language_">self</span>.button_frame,text=<span class="string">&quot;添加谜题&quot;</span>,command=<span class="variable language_">self</span>.add_riddle)</span><br><span class="line">        <span class="variable language_">self</span>.add_btn.pack(side=tk.LEFT,padx=<span class="number">5</span>)</span><br><span class="line">        <span class="variable language_">self</span>.leaderboard_btn=tk.Button(<span class="variable language_">self</span>.button_frame,text=<span class="string">&quot;排行榜&quot;</span>,command=<span class="variable language_">self</span>.show_leaderboard)</span><br><span class="line">        <span class="variable language_">self</span>.leaderboard_btn.pack(side=tk.LEFT,padx=<span class="number">5</span>)</span><br><span class="line">        <span class="variable language_">self</span>.quit_btn=tk.Button(<span class="variable language_">self</span>.button_frame,text=<span class="string">&quot;退出游戏&quot;</span>,command=<span class="variable language_">self</span>.quit_game)</span><br><span class="line">        <span class="variable language_">self</span>.quit_btn.pack(side=tk.LEFT,padx=<span class="number">5</span>)</span><br><span class="line">        <span class="comment">#建立四个按钮，用于四种功能</span></span><br><span class="line">    <span class="comment">#接下来定义一个载入函数，用于加载谜语文件</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_riddles</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(riddles,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                <span class="keyword">return</span> json.load(f)</span><br><span class="line">        <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">            <span class="keyword">return</span> []</span><br><span class="line">    <span class="comment">#可以写入谜语</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_riddles</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(riddles,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(<span class="variable language_">self</span>.riddles,f,ensure_ascii=<span class="literal">False</span>, indent=<span class="number">2</span>)</span><br><span class="line"><span class="comment">#为了保持中文字符，此处要ensure_ascii=False，还有就是文档中讲的设置indent，据说是为了增加可读性   </span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">load_leaderboard</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(rank,<span class="string">&#x27;r&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                <span class="keyword">return</span> deque(<span class="built_in">sorted</span>(json.load(f),key=<span class="keyword">lambda</span> x: x[<span class="string">&#x27;score&#x27;</span>], reverse=<span class="literal">True</span>),maxlen=<span class="number">5</span>)</span><br><span class="line">        <span class="keyword">except</span> FileNotFoundError:</span><br><span class="line">            <span class="keyword">return</span> deque(maxlen=<span class="number">5</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">save_leaderboard</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(rank,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            json.dump(<span class="built_in">list</span>(<span class="variable language_">self</span>.leaderboard),f,indent=<span class="number">2</span>)</span><br><span class="line">    <span class="comment">#定一个启动游戏的的函数，最低难度为1，最高难度为3</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">start_game</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.difficulty=simpledialog.askinteger(</span><br><span class="line">            <span class="string">&quot;选择难度&quot;</span>, </span><br><span class="line">            <span class="string">&quot;请选择难度（1-简单 2-中级 3-困难）&quot;</span>,</span><br><span class="line">            minvalue=<span class="number">1</span>,maxvalue=<span class="number">3</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.difficulty:</span><br><span class="line">            <span class="variable language_">self</span>.prepare_new_question()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">prepare_new_question</span>(<span class="params">self</span>):</span><br><span class="line">        available=[r <span class="keyword">for</span> r <span class="keyword">in</span> <span class="variable language_">self</span>.riddles <span class="keyword">if</span> r[<span class="string">&#x27;difficulty&#x27;</span>]==<span class="variable language_">self</span>.difficulty]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> available:</span><br><span class="line">            messagebox.showerror(<span class="string">&quot;错误&quot;</span>,<span class="string">&quot;该难度下没有可用题目&quot;</span>)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        <span class="variable language_">self</span>.current_riddle=random.choice(available)</span><br><span class="line">        <span class="variable language_">self</span>.riddle_label.config(text=<span class="variable language_">self</span>.current_riddle[<span class="string">&#x27;riddle&#x27;</span>])</span><br><span class="line">        <span class="comment">#在这里设置倒计时</span></span><br><span class="line">        <span class="variable language_">self</span>.time_left=<span class="number">30</span>-(<span class="variable language_">self</span>.difficulty-<span class="number">1</span>)*<span class="number">10</span></span><br><span class="line">        <span class="variable language_">self</span>.update_timer()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_timer</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.time_label.config(text=<span class="string">f&quot;剩余时间：<span class="subst">&#123;self.time_left&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.time_left&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="variable language_">self</span>.timer=<span class="variable language_">self</span>.root.after(<span class="number">1000</span>,<span class="variable language_">self</span>.update_timer)</span><br><span class="line">            <span class="variable language_">self</span>.time_left-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.handle_timeout()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">handle_timeout</span>(<span class="params">self</span>):</span><br><span class="line">        messagebox.showwarning(<span class="string">&quot;时间到&quot;</span>, <span class="string">&quot;答题时间已用完！&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.score-=<span class="variable language_">self</span>.difficulty</span><br><span class="line">        <span class="variable language_">self</span>.update_display()</span><br><span class="line">        <span class="variable language_">self</span>.check_game_over()</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.score&gt;=<span class="number">0</span>:</span><br><span class="line">            <span class="variable language_">self</span>.prepare_new_question()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_answer</span>(<span class="params">self,event=<span class="literal">None</span></span>):<span class="comment">#哈希比较，我这里都是用sha256，目前安全系数很高</span></span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.time_left&lt;=<span class="number">0</span> <span class="keyword">or</span> <span class="keyword">not</span> <span class="variable language_">self</span>.current_riddle:</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        answer=<span class="variable language_">self</span>.answer_entry.get().strip().lower()</span><br><span class="line">        <span class="variable language_">self</span>.answer_entry.delete(<span class="number">0</span>,tk.END)</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.timer:</span><br><span class="line">            <span class="variable language_">self</span>.root.after_cancel(<span class="variable language_">self</span>.timer)</span><br><span class="line">            <span class="variable language_">self</span>.timer=<span class="literal">None</span></span><br><span class="line">        hashed=hashlib.sha256(answer.encode()).hexdigest()</span><br><span class="line">        <span class="keyword">if</span> hashed==<span class="variable language_">self</span>.current_riddle[<span class="string">&#x27;answer&#x27;</span>]:</span><br><span class="line">            <span class="variable language_">self</span>.score+=<span class="variable language_">self</span>.difficulty</span><br><span class="line">            messagebox.showinfo(<span class="string">&quot;正确&quot;</span>, <span class="string">&quot;回答正确！&quot;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.score-=<span class="variable language_">self</span>.difficulty</span><br><span class="line">            messagebox.showerror(<span class="string">&quot;错误&quot;</span>, <span class="string">f&quot;回答错误！正确答案是：<span class="subst">&#123;self.current_riddle[<span class="string">&#x27;answer_plain&#x27;</span>]&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.update_display()</span><br><span class="line">        <span class="variable language_">self</span>.check_game_over()</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.score&gt;=<span class="number">0</span>:</span><br><span class="line">            <span class="variable language_">self</span>.prepare_new_question()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">add_riddle</span>(<span class="params">self</span>):</span><br><span class="line">        add_window=tk.Toplevel(<span class="variable language_">self</span>.root)</span><br><span class="line">        add_window.title(<span class="string">&quot;添加新谜题&quot;</span>)</span><br><span class="line">        <span class="comment">#在这里谜面输入</span></span><br><span class="line">        tk.Label(add_window, text=<span class="string">&quot;谜面：&quot;</span>).grid(row=<span class="number">0</span>,column=<span class="number">0</span>,padx=<span class="number">5</span>,pady=<span class="number">5</span>)</span><br><span class="line">        riddle_entry = tk.Entry(add_window,width=<span class="number">30</span>)</span><br><span class="line">        riddle_entry.grid(row=<span class="number">0</span>,column=<span class="number">1</span>,padx=<span class="number">5</span>,pady=<span class="number">5</span>)</span><br><span class="line">        <span class="comment">#这里是答案输入</span></span><br><span class="line">        tk.Label(add_window, text=<span class="string">&quot;答案：&quot;</span>).grid(row=<span class="number">1</span>,column=<span class="number">0</span>,padx=<span class="number">5</span>,pady=<span class="number">5</span>)</span><br><span class="line">        answer_entry=tk.Entry(add_window,width=<span class="number">30</span>)</span><br><span class="line">        answer_entry.grid(row=<span class="number">1</span>,column=<span class="number">1</span>,padx=<span class="number">5</span>,pady=<span class="number">5</span>)</span><br><span class="line">        <span class="comment">#选择难度</span></span><br><span class="line">        tk.Label(add_window,text=<span class="string">&quot;难度：&quot;</span>).grid(row=<span class="number">2</span>,column=<span class="number">0</span>,padx=<span class="number">5</span>,pady=<span class="number">5</span>)</span><br><span class="line">        difficulty=tk.IntVar(value=<span class="number">1</span>)</span><br><span class="line">        tk.Radiobutton(add_window,text=<span class="string">&quot;简单&quot;</span>,variable=difficulty,value=<span class="number">1</span>).grid(row=<span class="number">2</span>,column=<span class="number">1</span>,sticky=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">        tk.Radiobutton(add_window,text=<span class="string">&quot;中级&quot;</span>,variable=difficulty,value=<span class="number">2</span>).grid(row=<span class="number">3</span>,column=<span class="number">1</span>,sticky=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">        tk.Radiobutton(add_window,text=<span class="string">&quot;困难&quot;</span>,variable=difficulty,value=<span class="number">3</span>).grid(row=<span class="number">4</span>,column=<span class="number">1</span>,sticky=<span class="string">&quot;w&quot;</span>)</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">save</span>():</span><br><span class="line">            answer_plain=answer_entry.get().strip().lower()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> riddle_entry.get() <span class="keyword">or</span> <span class="keyword">not</span> answer_plain:</span><br><span class="line">                messagebox.showerror(<span class="string">&quot;错误&quot;</span>,<span class="string">&quot;谜面和答案不能为空&quot;</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            hashed=hashlib.sha256(answer_plain.encode()).hexdigest()</span><br><span class="line">            new_riddle=&#123;</span><br><span class="line">                <span class="string">&#x27;riddle&#x27;</span>:riddle_entry.get(),</span><br><span class="line">                <span class="string">&#x27;answer&#x27;</span>:hashed,</span><br><span class="line">                <span class="string">&#x27;difficulty&#x27;</span>:difficulty.get(),</span><br><span class="line">                <span class="string">&#x27;answer_plain&#x27;</span>:answer_plain</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="variable language_">self</span>.riddles.append(new_riddle)</span><br><span class="line">            <span class="variable language_">self</span>.save_riddles()</span><br><span class="line">            add_window.destroy()</span><br><span class="line">            messagebox.showinfo(<span class="string">&quot;成功&quot;</span>,<span class="string">&quot;谜题添加成功！&quot;</span>)</span><br><span class="line">        save_btn=tk.Button(add_window,text=<span class="string">&quot;保存&quot;</span>,command=save)</span><br><span class="line">        save_btn.grid(row=<span class="number">5</span>,columnspan=<span class="number">2</span>,pady=<span class="number">10</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">show_leaderboard</span>(<span class="params">self</span>):</span><br><span class="line">        lb_text=<span class="string">&quot;排行榜\n&quot;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> <span class="variable language_">self</span>.leaderboard:</span><br><span class="line">            lb_text+=<span class="string">&quot;暂无记录&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> i,entry <span class="keyword">in</span> <span class="built_in">enumerate</span>(<span class="built_in">sorted</span>(<span class="variable language_">self</span>.leaderboard,key=<span class="keyword">lambda</span> x:x[<span class="string">&#x27;score&#x27;</span>],reverse=<span class="literal">True</span>)):</span><br><span class="line">                lb_text+=<span class="string">f&quot;第<span class="subst">&#123;i+<span class="number">1</span>&#125;</span>名: <span class="subst">&#123;entry[<span class="string">&#x27;name&#x27;</span>]&#125;</span>-<span class="subst">&#123;entry[<span class="string">&#x27;score&#x27;</span>]&#125;</span>分\n&quot;</span></span><br><span class="line">        messagebox.showinfo(<span class="string">&quot;排行榜&quot;</span>,lb_text)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_game_over</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.score&lt;<span class="number">0</span>:</span><br><span class="line">            messagebox.showinfo(<span class="string">&quot;游戏结束&quot;</span>,<span class="string">&quot;挑战失败！&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> <span class="variable language_">self</span>._check_leaderboard_qualify():</span><br><span class="line">                name=simpledialog.askstring(<span class="string">&quot;记录&quot;</span>,<span class="string">&quot;恭喜进入前五！请输入姓名：&quot;</span>)</span><br><span class="line">                <span class="keyword">if</span> name:</span><br><span class="line">                    <span class="variable language_">self</span>.leaderboard.append(&#123;<span class="string">&#x27;name&#x27;</span>:name,<span class="string">&#x27;score&#x27;</span>:<span class="variable language_">self</span>.score&#125;)</span><br><span class="line">                    <span class="variable language_">self</span>.save_leaderboard()</span><br><span class="line">            <span class="variable language_">self</span>.root.destroy()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_check_leaderboard_qualify</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(<span class="variable language_">self</span>.leaderboard)&lt;<span class="number">5</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.score&gt;<span class="built_in">min</span>(entry[<span class="string">&#x27;score&#x27;</span>] <span class="keyword">for</span> entry <span class="keyword">in</span> <span class="variable language_">self</span>.leaderboard)</span><br><span class="line">    <span class="comment">#一个方法一个方法慢慢定义下去吧，遇到不会的就问问学长他们，好累，终于要写完了</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">quit_game</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.score&gt;<span class="number">0</span> <span class="keyword">and</span> <span class="variable language_">self</span>._check_leaderboard_qualify():</span><br><span class="line">            name=simpledialog.askstring(<span class="string">&quot;记录&quot;</span>,<span class="string">&quot;恭喜进入前五！请输入姓名：&quot;</span>)</span><br><span class="line">            <span class="keyword">if</span> name:</span><br><span class="line">                <span class="variable language_">self</span>.leaderboard.append(&#123;<span class="string">&#x27;name&#x27;</span>:name,<span class="string">&#x27;score&#x27;</span>:<span class="variable language_">self</span>.score&#125;)</span><br><span class="line">                <span class="variable language_">self</span>.save_leaderboard()</span><br><span class="line">        <span class="variable language_">self</span>.root.destroy()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_display</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="variable language_">self</span>.score_label.config(text=<span class="string">f&quot;当前分数：<span class="subst">&#123;self.score&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.time_label.config(text=<span class="string">f&quot;剩余时间：<span class="subst">&#123;self.time_left&#125;</span>&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    root=tk.Tk()</span><br><span class="line">    game=RiddleGame(root)</span><br><span class="line">    root.mainloop()</span><br></pre></td></tr></table></figure>
<p>恶心至极啊，根本没写过这种又臭又长的东西，简直是ex死我了，还没什么作用，这个年代了谁还用tkinter这种基础GUI库(你别杠说你为什么不去用其他库，一共就5天时间写完这么多大作业，我还要去上课，怎么可能学更复杂的)</p>
<h4 id="第三题，西游记画词云图和人物关系图"><a href="#第三题，西游记画词云图和人物关系图" class="headerlink" title="第三题，西游记画词云图和人物关系图"></a>第三题，西游记画词云图和人物关系图</h4><p>闲着没事干是不是，画这种玩意，jieba库是给你这么玩的，能不能干点更有意义的事情<br>还好我借助了东南大学同学开源的人物名称字典，剩下的自己写一个白名单进行过滤即可<br>感谢东南大学的大力支持<br><a target="_blank" rel="noopener" href="https://github.com/GaoChDemo/xyjnpl/blob/master/source/nr_deal.txt">https://github.com/GaoChDemo/xyjnpl/blob/master/source/nr_deal.txt</a><br>附上他们的链接<br><del>恶心啊</del></p>
<blockquote>
<p>每一题恶心题被写，都有一个学生遭到迫害–拉蒙特徐</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"><span class="keyword">import</span> wordcloud</span><br><span class="line"><span class="keyword">import</span> networkx <span class="keyword">as</span> nx</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> defaultdict</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">takeSecond</span>(<span class="params">elem</span>):</span><br><span class="line">    <span class="keyword">return</span> elem[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">wordyun</span>(<span class="params"><span class="built_in">dict</span></span>):<span class="comment">#这里需要用词频生成</span></span><br><span class="line">    w=wordcloud.WordCloud(</span><br><span class="line">        font_path=<span class="string">&quot;msyh.ttc&quot;</span>,</span><br><span class="line">        width=<span class="number">1000</span>,</span><br><span class="line">        height=<span class="number">500</span>,</span><br><span class="line">        background_color=<span class="string">&quot;white&quot;</span>,</span><br><span class="line">    )</span><br><span class="line">    <span class="comment">#我这里先设置一下词云的基本参数，调用的和第一题一样都是支持中文的微软雅黑</span></span><br><span class="line">    <span class="comment">#然后就是基本的参数，这些都看个人，爱使用哪个就可以用哪个，反正可以查一下库</span></span><br><span class="line">    w.generate_from_frequencies(<span class="built_in">dict</span>)<span class="comment">#原先我直接用generate，但是不行，后面查了，用词频作为输入对象，得用另外一种（文中这种）的方法</span></span><br><span class="line">    w.to_file(<span class="string">&quot;词云.jpg&quot;</span>)</span><br><span class="line"><span class="comment">#看错了题目的要求，是要对人物进行分词，我上github找了现成的词典（xiyouji_dict），然后纳入jieba库里面，我这里再加一句载入jieba库的语句</span></span><br><span class="line"><span class="comment">#在后面我还会进行更改，只对人物名的分词进行统计，不会对例如金箍棒这样子的词进行统计</span></span><br><span class="line">jieba.load_userdict(<span class="string">&quot;xiyouji_dict.txt&quot;</span>)</span><br><span class="line"><span class="comment">#这里定义一个白名单，只有在字典中的人物名会被统计，其余都会被过滤</span></span><br><span class="line">white_words=<span class="built_in">set</span>()</span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&quot;xiyouji_dict.txt&quot;</span>, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf-8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> f:</span><br><span class="line">        parts = line.strip().split()</span><br><span class="line">        <span class="keyword">if</span> parts:  <span class="comment">#这里要确保非空行</span></span><br><span class="line">            white_words.add(parts[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    path=<span class="string">&quot;西游记.txt&quot;</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&quot;r&quot;</span>,encoding=<span class="string">&quot;gb18030&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        text=f.read()</span><br><span class="line">    words=jieba.lcut(text)</span><br><span class="line">    count=&#123;&#125;</span><br><span class="line">    <span class="keyword">for</span> word <span class="keyword">in</span> words:</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(word)==<span class="number">1</span>:</span><br><span class="line">            <span class="keyword">continue</span><span class="comment">#单个字的很明显不是什么人名，直接去掉即可</span></span><br><span class="line">        <span class="comment">#上网查一个西游记里面的人物及其别名大全，直接写下来，合并成同一个词</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span> [<span class="string">&quot;大圣&quot;</span>,<span class="string">&quot;老孙&quot;</span>,<span class="string">&quot;行者&quot;</span>,<span class="string">&quot;孙大圣&quot;</span>,<span class="string">&quot;孙行者&quot;</span>,<span class="string">&quot;猴王&quot;</span>,<span class="string">&quot;悟空&quot;</span>,<span class="string">&quot;齐天大圣&quot;</span>,<span class="string">&quot;猴子&quot;</span>,<span class="string">&quot;斗战胜佛&quot;</span>,<span class="string">&quot;弼马温&quot;</span>,<span class="string">&quot;美猴王&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;孙悟空&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span> [<span class="string">&quot;师父&quot;</span>,<span class="string">&quot;三藏&quot;</span>,<span class="string">&quot;圣僧&quot;</span>,<span class="string">&quot;金禅子&quot;</span>,<span class="string">&quot;玄奘&quot;</span>,<span class="string">&quot;唐三藏&quot;</span>,<span class="string">&quot;御弟&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;唐僧&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span> [<span class="string">&quot;呆子&quot;</span>,<span class="string">&quot;八戒&quot;</span>,<span class="string">&quot;老猪&quot;</span>,<span class="string">&quot;净坛使者&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;猪八戒&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span> [<span class="string">&quot;妖精&quot;</span>,<span class="string">&quot;妖魔&quot;</span>,<span class="string">&quot;妖道&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;妖怪&quot;</span><span class="comment">#这里你就想，西游记里妖怪这个词出现的次数肯定比黄风大王，白骨精那些都要多，统计妖怪即可</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span>[<span class="string">&quot;沙和尚&quot;</span>,<span class="string">&quot;悟净&quot;</span>,<span class="string">&quot;卷帘大将&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;沙僧&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word==<span class="string">&quot;佛祖&quot;</span>:</span><br><span class="line">            uniword=<span class="string">&quot;如来&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word <span class="keyword">in</span> [<span class="string">&quot;三太子&quot;</span>,<span class="string">&quot;八部天龙马&quot;</span>]:</span><br><span class="line">            uniword=<span class="string">&quot;白马&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word==<span class="string">&quot;唐王&quot;</span>:</span><br><span class="line">            uniword=<span class="string">&quot;唐三藏&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word==<span class="string">&quot;观音&quot;</span>:</span><br><span class="line">            uniword=<span class="string">&quot;观音菩萨&quot;</span></span><br><span class="line">        <span class="keyword">elif</span> word==<span class="string">&quot;天王&quot;</span>:</span><br><span class="line">            uniword=<span class="string">&quot;李天王&quot;</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            uniword=word  <span class="comment">#一些主要人物考虑一下不同的称呼，其余的就算了，因为百眼魔君孙悟空叫他妖道，镇元子孙悟空也是这么叫的，这种根本统计不完，这里非特殊词保持原样</span></span><br><span class="line">        <span class="comment">#接下来通过白名单来过滤那些非人名的词</span></span><br><span class="line">        white_words.update([<span class="string">&quot;唐僧&quot;</span>, <span class="string">&quot;孙悟空&quot;</span>, <span class="string">&quot;猪八戒&quot;</span>, <span class="string">&quot;沙僧&quot;</span>, <span class="string">&quot;如来&quot;</span>, <span class="string">&quot;白马&quot;</span>, <span class="string">&quot;妖怪&quot;</span>,<span class="string">&quot;唐三藏&quot;</span>,<span class="string">&quot;观音菩萨&quot;</span>,<span class="string">&quot;李天王&quot;</span>])<span class="comment">#更新一下白名单</span></span><br><span class="line">        <span class="keyword">if</span> uniword <span class="keyword">in</span> white_words:</span><br><span class="line">            count[uniword]=count.get(uniword,<span class="number">0</span>)+<span class="number">1</span></span><br><span class="line">    items=<span class="built_in">list</span>(count.items())</span><br><span class="line">    items.sort(key=takeSecond,reverse=<span class="literal">True</span>)</span><br><span class="line">    wordyun(count)   </span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">24</span>):</span><br><span class="line">        item=items[i]</span><br><span class="line">        keyWord=item[<span class="number">0</span>]</span><br><span class="line">        jishu=item[<span class="number">1</span>]</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;&#123;0:&lt;10&#125;&#123;1:&gt;5&#125;&quot;</span>.<span class="built_in">format</span>(keyWord,jishu))</span><br><span class="line"></span><br><span class="line">    top24=[item[<span class="number">0</span>] <span class="keyword">for</span> item <span class="keyword">in</span> items[:<span class="number">24</span>]]<span class="comment">#准备一下前24个人物，后续画关系网络的重点</span></span><br><span class="line">    perduan=[par <span class="keyword">for</span> par <span class="keyword">in</span> text.split(<span class="string">&quot;\n&quot;</span>)]<span class="comment">#按段落来区分，准备看人物关系了</span></span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    接下来按道理是要进行像上面那样，分类同义词以及进行分词，然后再判断是不是在top24里面，但是照抄没什么意思，我看直接画关系即可，就是不进行同义词这部分</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> para <span class="keyword">in</span> perduan:</span><br><span class="line">        char=<span class="built_in">set</span>()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> jieba.lcut(para):</span><br><span class="line">            <span class="keyword">if</span> word <span class="keyword">in</span> top24:</span><br><span class="line">                char.add(word)</span><br><span class="line">        <span class="comment">#把每个人物出现的有限人物都存储下来</span></span><br><span class="line">        <span class="comment">#接下来要确保每个人物在每一段中出现的有效次数只有一次，方便后续计算（不然的话，那很完蛋了，孙悟空在段落里出现一次，猪八戒出现三次，那究竟是要记一次还是三次，为了保险起见，还是只记一次）</span></span><br><span class="line">    ls=<span class="built_in">list</span>(char)</span><br><span class="line">    newcount=defaultdict(<span class="built_in">int</span>)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(ls)):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>,<span class="built_in">len</span>(ls)):</span><br><span class="line">            <span class="comment">#这里要利用元组的特性，例如(&quot;孙悟空&quot;, &quot;唐僧&quot;)和(&quot;唐僧&quot;, &quot;孙悟空&quot;)会被排序后统一为同一个元组</span></span><br><span class="line">            double=<span class="built_in">tuple</span>(<span class="built_in">sorted</span>([char[i],char[j]]))</span><br><span class="line">            <span class="comment">#接下来用字典记权重</span></span><br><span class="line">            newcount[double]+=<span class="number">1</span></span><br><span class="line">    <span class="comment">#创建一个新的无向图，用networkx的Graph方法(注意：区分开头大小写,我就因此中招)</span></span><br><span class="line">    draw=nx.Graph()</span><br><span class="line">    <span class="comment">#将前24位人物都初始化为网络节点</span></span><br><span class="line">    draw.add_nodes_from(top24)</span><br><span class="line">    <span class="keyword">for</span> double,value <span class="keyword">in</span> newcount.items():</span><br><span class="line">        <span class="keyword">if</span> value&gt;<span class="number">0</span>:</span><br><span class="line">            <span class="comment">#很容易理解的，权重为0那就是毫无关系，那就不能加边</span></span><br><span class="line">            draw.add_edge(double[<span class="number">0</span>],double[<span class="number">1</span>],weight=value)</span><br><span class="line">            <span class="comment">#权重weight就是字典的值value</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">15</span>,<span class="number">15</span>))</span><br><span class="line">    pos=nx.spring_layout(draw, k=<span class="number">0.8</span>)</span><br><span class="line">    nx.draw(draw,pos,with_labels=<span class="literal">True</span>, </span><br><span class="line">           node_size=[count[name]*<span class="number">50</span> <span class="keyword">for</span> name <span class="keyword">in</span> draw.nodes()],</span><br><span class="line">           width=[d[<span class="string">&#x27;weight&#x27;</span>]*<span class="number">0.3</span> <span class="keyword">for</span> (u,v,d) <span class="keyword">in</span> draw.edges(data=<span class="literal">True</span>)],</span><br><span class="line">           font_family=<span class="string">&#x27;SimHei&#x27;</span>)</span><br><span class="line">    <span class="comment">#用默认参数即可</span></span><br><span class="line">    plt.savefig(<span class="string">&#x27;关系网络.png&#x27;</span>, dpi=<span class="number">300</span>)</span><br><span class="line">    plt.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure>
<h4 id="第四题，GUI界面实现三种加解密"><a href="#第四题，GUI界面实现三种加解密" class="headerlink" title="第四题，GUI界面实现三种加解密"></a>第四题，GUI界面实现三种加解密</h4><p>太唐了啊，这种寄吧东西，谁爱写屎谁就去写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#网安2402-24-曹楚涵</span></span><br><span class="line"><span class="keyword">import</span> tkinter <span class="keyword">as</span> tk</span><br><span class="line"><span class="keyword">from</span> tkinter <span class="keyword">import</span> ttk, messagebox</span><br><span class="line"><span class="comment">#(这里加解密函数我之前选B的时候都写了，这里我直接复制粘贴，就不多说了)</span></span><br><span class="line"><span class="comment"># 凯撒加密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">kaisa</span>(<span class="params">text: <span class="built_in">str</span>, shift: <span class="built_in">int</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process_char</span>(<span class="params">c</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> c.isalpha():</span><br><span class="line">            <span class="keyword">return</span> c</span><br><span class="line">        base = <span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>) <span class="keyword">if</span> c.isupper() <span class="keyword">else</span> <span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">chr</span>((<span class="built_in">ord</span>(c) - base + shift) % <span class="number">26</span> + base)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(process_char(c) <span class="keyword">for</span> c <span class="keyword">in</span> text)</span><br><span class="line">morse_code = &#123;</span><br><span class="line">        <span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;.-&#x27;</span>,<span class="string">&#x27;B&#x27;</span>:<span class="string">&#x27;-...&#x27;</span>,<span class="string">&#x27;C&#x27;</span>:<span class="string">&#x27;-.-.&#x27;</span>,<span class="string">&#x27;D&#x27;</span>:<span class="string">&#x27;-..&#x27;</span>,<span class="string">&#x27;E&#x27;</span>:<span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;F&#x27;</span>:<span class="string">&#x27;..-.&#x27;</span>,<span class="string">&#x27;G&#x27;</span>:<span class="string">&#x27;--.&#x27;</span>,<span class="string">&#x27;H&#x27;</span>:<span class="string">&#x27;....&#x27;</span>,<span class="string">&#x27;I&#x27;</span>:<span class="string">&#x27;..&#x27;</span>,<span class="string">&#x27;J&#x27;</span>:<span class="string">&#x27;.---&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;K&#x27;</span>:<span class="string">&#x27;-.-&#x27;</span>,<span class="string">&#x27;L&#x27;</span>:<span class="string">&#x27;.-..&#x27;</span>,<span class="string">&#x27;M&#x27;</span>:<span class="string">&#x27;--&#x27;</span>,<span class="string">&#x27;N&#x27;</span>:<span class="string">&#x27;-.&#x27;</span>,<span class="string">&#x27;O&#x27;</span>:<span class="string">&#x27;---&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;P&#x27;</span>:<span class="string">&#x27;.--.&#x27;</span>,<span class="string">&#x27;Q&#x27;</span>:<span class="string">&#x27;--.-&#x27;</span>,<span class="string">&#x27;R&#x27;</span>:<span class="string">&#x27;.-.&#x27;</span>,<span class="string">&#x27;S&#x27;</span>:<span class="string">&#x27;...&#x27;</span>,<span class="string">&#x27;T&#x27;</span>:<span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;U&#x27;</span>:<span class="string">&#x27;..-&#x27;</span>,<span class="string">&#x27;V&#x27;</span>:<span class="string">&#x27;...-&#x27;</span>,<span class="string">&#x27;W&#x27;</span>:<span class="string">&#x27;.--&#x27;</span>,<span class="string">&#x27;X&#x27;</span>:<span class="string">&#x27;-..-&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>:<span class="string">&#x27;-.--&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Z&#x27;</span>:<span class="string">&#x27;--..&#x27;</span>,<span class="string">&#x27;1&#x27;</span>:<span class="string">&#x27;.----&#x27;</span>,<span class="string">&#x27;2&#x27;</span>:<span class="string">&#x27;..---&#x27;</span>,<span class="string">&#x27;3&#x27;</span>:<span class="string">&#x27;...--&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;4&#x27;</span>:<span class="string">&#x27;....-&#x27;</span>,<span class="string">&#x27;5&#x27;</span>:<span class="string">&#x27;.....&#x27;</span>,<span class="string">&#x27;6&#x27;</span>:<span class="string">&#x27;-....&#x27;</span>,<span class="string">&#x27;7&#x27;</span>:<span class="string">&#x27;--...&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;8&#x27;</span>:<span class="string">&#x27;---..&#x27;</span>,<span class="string">&#x27;9&#x27;</span>:<span class="string">&#x27;----.&#x27;</span>,<span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;-----&#x27;</span>,<span class="string">&#x27; &#x27;</span>:<span class="string">&#x27;/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment"># 摩斯加密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">mose1</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    morse_code = &#123;</span><br><span class="line">        <span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;.-&#x27;</span>,<span class="string">&#x27;B&#x27;</span>:<span class="string">&#x27;-...&#x27;</span>,<span class="string">&#x27;C&#x27;</span>:<span class="string">&#x27;-.-.&#x27;</span>,<span class="string">&#x27;D&#x27;</span>:<span class="string">&#x27;-..&#x27;</span>,<span class="string">&#x27;E&#x27;</span>:<span class="string">&#x27;.&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;F&#x27;</span>:<span class="string">&#x27;..-.&#x27;</span>,<span class="string">&#x27;G&#x27;</span>:<span class="string">&#x27;--.&#x27;</span>,<span class="string">&#x27;H&#x27;</span>:<span class="string">&#x27;....&#x27;</span>,<span class="string">&#x27;I&#x27;</span>:<span class="string">&#x27;..&#x27;</span>,<span class="string">&#x27;J&#x27;</span>:<span class="string">&#x27;.---&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;K&#x27;</span>:<span class="string">&#x27;-.-&#x27;</span>,<span class="string">&#x27;L&#x27;</span>:<span class="string">&#x27;.-..&#x27;</span>,<span class="string">&#x27;M&#x27;</span>:<span class="string">&#x27;--&#x27;</span>,<span class="string">&#x27;N&#x27;</span>:<span class="string">&#x27;-.&#x27;</span>,<span class="string">&#x27;O&#x27;</span>:<span class="string">&#x27;---&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;P&#x27;</span>:<span class="string">&#x27;.--.&#x27;</span>,<span class="string">&#x27;Q&#x27;</span>:<span class="string">&#x27;--.-&#x27;</span>,<span class="string">&#x27;R&#x27;</span>:<span class="string">&#x27;.-.&#x27;</span>,<span class="string">&#x27;S&#x27;</span>:<span class="string">&#x27;...&#x27;</span>,<span class="string">&#x27;T&#x27;</span>:<span class="string">&#x27;-&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;U&#x27;</span>:<span class="string">&#x27;..-&#x27;</span>,<span class="string">&#x27;V&#x27;</span>:<span class="string">&#x27;...-&#x27;</span>,<span class="string">&#x27;W&#x27;</span>:<span class="string">&#x27;.--&#x27;</span>,<span class="string">&#x27;X&#x27;</span>:<span class="string">&#x27;-..-&#x27;</span>,<span class="string">&#x27;Y&#x27;</span>:<span class="string">&#x27;-.--&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Z&#x27;</span>:<span class="string">&#x27;--..&#x27;</span>,<span class="string">&#x27;1&#x27;</span>:<span class="string">&#x27;.----&#x27;</span>,<span class="string">&#x27;2&#x27;</span>:<span class="string">&#x27;..---&#x27;</span>,<span class="string">&#x27;3&#x27;</span>:<span class="string">&#x27;...--&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;4&#x27;</span>:<span class="string">&#x27;....-&#x27;</span>,<span class="string">&#x27;5&#x27;</span>:<span class="string">&#x27;.....&#x27;</span>,<span class="string">&#x27;6&#x27;</span>:<span class="string">&#x27;-....&#x27;</span>,<span class="string">&#x27;7&#x27;</span>:<span class="string">&#x27;--...&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;8&#x27;</span>:<span class="string">&#x27;---..&#x27;</span>,<span class="string">&#x27;9&#x27;</span>:<span class="string">&#x27;----.&#x27;</span>,<span class="string">&#x27;0&#x27;</span>:<span class="string">&#x27;-----&#x27;</span>,<span class="string">&#x27; &#x27;</span>:<span class="string">&#x27;/&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27; &#x27;</span>.join(morse_code.get(c.upper(), c) <span class="keyword">for</span> c <span class="keyword">in</span> text)</span><br><span class="line">baconian = &#123;</span><br><span class="line">        <span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;AAAAA&#x27;</span>,<span class="string">&#x27;B&#x27;</span>:<span class="string">&#x27;AAAAB&#x27;</span>,<span class="string">&#x27;C&#x27;</span>:<span class="string">&#x27;AAABA&#x27;</span>,<span class="string">&#x27;D&#x27;</span>:<span class="string">&#x27;AAABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;E&#x27;</span>:<span class="string">&#x27;AABAA&#x27;</span>,<span class="string">&#x27;F&#x27;</span>:<span class="string">&#x27;AABAB&#x27;</span>,<span class="string">&#x27;G&#x27;</span>:<span class="string">&#x27;AABBA&#x27;</span>,<span class="string">&#x27;H&#x27;</span>:<span class="string">&#x27;AABBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;I&#x27;</span>:<span class="string">&#x27;ABAAA&#x27;</span>,<span class="string">&#x27;J&#x27;</span>:<span class="string">&#x27;ABAAB&#x27;</span>,<span class="string">&#x27;K&#x27;</span>:<span class="string">&#x27;ABABA&#x27;</span>,<span class="string">&#x27;L&#x27;</span>:<span class="string">&#x27;ABABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;M&#x27;</span>:<span class="string">&#x27;ABBAA&#x27;</span>,<span class="string">&#x27;N&#x27;</span>:<span class="string">&#x27;ABBAB&#x27;</span>,<span class="string">&#x27;O&#x27;</span>:<span class="string">&#x27;ABBBA&#x27;</span>,<span class="string">&#x27;P&#x27;</span>:<span class="string">&#x27;ABBBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Q&#x27;</span>:<span class="string">&#x27;BAAAA&#x27;</span>,<span class="string">&#x27;R&#x27;</span>:<span class="string">&#x27;BAAAB&#x27;</span>,<span class="string">&#x27;S&#x27;</span>:<span class="string">&#x27;BAABA&#x27;</span>,<span class="string">&#x27;T&#x27;</span>:<span class="string">&#x27;BAABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;U&#x27;</span>:<span class="string">&#x27;BABAA&#x27;</span>,<span class="string">&#x27;V&#x27;</span>:<span class="string">&#x27;BABAB&#x27;</span>,<span class="string">&#x27;W&#x27;</span>:<span class="string">&#x27;BABBA&#x27;</span>,<span class="string">&#x27;X&#x27;</span>:<span class="string">&#x27;BABBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Y&#x27;</span>:<span class="string">&#x27;BBAAA&#x27;</span>,<span class="string">&#x27;Z&#x27;</span>:<span class="string">&#x27;BBAAB&#x27;</span>,<span class="string">&#x27; &#x27;</span>:<span class="string">&#x27;BBBBB&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment"># 培根加密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">peigen</span>(<span class="params">text: <span class="built_in">str</span></span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">    baconian = &#123;</span><br><span class="line">        <span class="string">&#x27;A&#x27;</span>:<span class="string">&#x27;AAAAA&#x27;</span>,<span class="string">&#x27;B&#x27;</span>:<span class="string">&#x27;AAAAB&#x27;</span>,<span class="string">&#x27;C&#x27;</span>:<span class="string">&#x27;AAABA&#x27;</span>,<span class="string">&#x27;D&#x27;</span>:<span class="string">&#x27;AAABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;E&#x27;</span>:<span class="string">&#x27;AABAA&#x27;</span>,<span class="string">&#x27;F&#x27;</span>:<span class="string">&#x27;AABAB&#x27;</span>,<span class="string">&#x27;G&#x27;</span>:<span class="string">&#x27;AABBA&#x27;</span>,<span class="string">&#x27;H&#x27;</span>:<span class="string">&#x27;AABBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;I&#x27;</span>:<span class="string">&#x27;ABAAA&#x27;</span>,<span class="string">&#x27;J&#x27;</span>:<span class="string">&#x27;ABAAB&#x27;</span>,<span class="string">&#x27;K&#x27;</span>:<span class="string">&#x27;ABABA&#x27;</span>,<span class="string">&#x27;L&#x27;</span>:<span class="string">&#x27;ABABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;M&#x27;</span>:<span class="string">&#x27;ABBAA&#x27;</span>,<span class="string">&#x27;N&#x27;</span>:<span class="string">&#x27;ABBAB&#x27;</span>,<span class="string">&#x27;O&#x27;</span>:<span class="string">&#x27;ABBBA&#x27;</span>,<span class="string">&#x27;P&#x27;</span>:<span class="string">&#x27;ABBBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Q&#x27;</span>:<span class="string">&#x27;BAAAA&#x27;</span>,<span class="string">&#x27;R&#x27;</span>:<span class="string">&#x27;BAAAB&#x27;</span>,<span class="string">&#x27;S&#x27;</span>:<span class="string">&#x27;BAABA&#x27;</span>,<span class="string">&#x27;T&#x27;</span>:<span class="string">&#x27;BAABB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;U&#x27;</span>:<span class="string">&#x27;BABAA&#x27;</span>,<span class="string">&#x27;V&#x27;</span>:<span class="string">&#x27;BABAB&#x27;</span>,<span class="string">&#x27;W&#x27;</span>:<span class="string">&#x27;BABBA&#x27;</span>,<span class="string">&#x27;X&#x27;</span>:<span class="string">&#x27;BABBB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Y&#x27;</span>:<span class="string">&#x27;BBAAA&#x27;</span>,<span class="string">&#x27;Z&#x27;</span>:<span class="string">&#x27;BBAAB&#x27;</span>,<span class="string">&#x27; &#x27;</span>:<span class="string">&#x27;BBBBB&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(baconian.get(c.upper(), c) <span class="keyword">for</span> c <span class="keyword">in</span> text)</span><br><span class="line"><span class="comment"># 凯撒解密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jiemikaisa</span>(<span class="params">text:<span class="built_in">str</span>,shift:<span class="built_in">int</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">jiemi</span>(<span class="params">c</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> c.isalpha():</span><br><span class="line">            <span class="keyword">return</span> c</span><br><span class="line">        <span class="keyword">if</span> c.isupper():</span><br><span class="line">            yuan=<span class="built_in">ord</span>(<span class="string">&#x27;A&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            yuan=<span class="built_in">ord</span>(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">chr</span>((<span class="built_in">ord</span>(c)-yuan-shift)%<span class="number">26</span>+yuan)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(jiemi(c) <span class="keyword">for</span> c <span class="keyword">in</span> text)</span><br><span class="line"><span class="comment"># 摩斯解密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jiemimose</span>(<span class="params">text:<span class="built_in">str</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line">    mose=&#123;</span><br><span class="line">    <span class="string">&#x27;.-&#x27;</span>:<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;-...&#x27;</span>:<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;-.-.&#x27;</span>:<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;-..&#x27;</span>:<span class="string">&#x27;D&#x27;</span>,<span class="string">&#x27;.&#x27;</span>:<span class="string">&#x27;E&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;..-.&#x27;</span>:<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;--.&#x27;</span>:<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;....&#x27;</span>:<span class="string">&#x27;H&#x27;</span>,<span class="string">&#x27;..&#x27;</span>:<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;.---&#x27;</span>:<span class="string">&#x27;J&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-.-&#x27;</span>:<span class="string">&#x27;K&#x27;</span>,<span class="string">&#x27;.-..&#x27;</span>:<span class="string">&#x27;L&#x27;</span>,<span class="string">&#x27;--&#x27;</span>:<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;-.&#x27;</span>:<span class="string">&#x27;N&#x27;</span>,<span class="string">&#x27;---&#x27;</span>:<span class="string">&#x27;O&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;.--.&#x27;</span>:<span class="string">&#x27;P&#x27;</span>,<span class="string">&#x27;--.-&#x27;</span>:<span class="string">&#x27;Q&#x27;</span>,<span class="string">&#x27;.-.&#x27;</span>:<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;...&#x27;</span>:<span class="string">&#x27;S&#x27;</span>,<span class="string">&#x27;-&#x27;</span>:<span class="string">&#x27;T&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;..-&#x27;</span>:<span class="string">&#x27;U&#x27;</span>,<span class="string">&#x27;...-&#x27;</span>:<span class="string">&#x27;V&#x27;</span>,<span class="string">&#x27;.--&#x27;</span>:<span class="string">&#x27;W&#x27;</span>,<span class="string">&#x27;-..-&#x27;</span>:<span class="string">&#x27;X&#x27;</span>,<span class="string">&#x27;-.--&#x27;</span>:<span class="string">&#x27;Y&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;--..&#x27;</span>:<span class="string">&#x27;Z&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;.----&#x27;</span>:<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;..---&#x27;</span>:<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;...--&#x27;</span>:<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;....-&#x27;</span>:<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;.....&#x27;</span>:<span class="string">&#x27;5&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;-....&#x27;</span>:<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;--...&#x27;</span>:<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;---..&#x27;</span>:<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;----.&#x27;</span>:<span class="string">&#x27;9&#x27;</span>,<span class="string">&#x27;-----&#x27;</span>:<span class="string">&#x27;0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;/&#x27;</span>:<span class="string">&#x27; &#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">    fenjie=text.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">    result=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> fenjie:</span><br><span class="line">        result.append(mose[i])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(result)</span><br><span class="line"><span class="comment"># 培根解密函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">jiemipeigen</span>(<span class="params">text:<span class="built_in">str</span></span>)-&gt;<span class="built_in">str</span>:</span><br><span class="line">    peigen=&#123;</span><br><span class="line">    <span class="string">&#x27;AAAAA&#x27;</span>:<span class="string">&#x27;A&#x27;</span>,<span class="string">&#x27;AAAAB&#x27;</span>:<span class="string">&#x27;B&#x27;</span>,<span class="string">&#x27;AAABA&#x27;</span>:<span class="string">&#x27;C&#x27;</span>,<span class="string">&#x27;AAABB&#x27;</span>:<span class="string">&#x27;D&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;AABAA&#x27;</span>:<span class="string">&#x27;E&#x27;</span>,<span class="string">&#x27;AABAB&#x27;</span>:<span class="string">&#x27;F&#x27;</span>,<span class="string">&#x27;AABBA&#x27;</span>:<span class="string">&#x27;G&#x27;</span>,<span class="string">&#x27;AABBB&#x27;</span>:<span class="string">&#x27;H&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ABAAA&#x27;</span>:<span class="string">&#x27;I&#x27;</span>,<span class="string">&#x27;ABAAB&#x27;</span>:<span class="string">&#x27;J&#x27;</span>,<span class="string">&#x27;ABABA&#x27;</span>:<span class="string">&#x27;K&#x27;</span>,<span class="string">&#x27;ABABB&#x27;</span>:<span class="string">&#x27;L&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;ABBAA&#x27;</span>:<span class="string">&#x27;M&#x27;</span>,<span class="string">&#x27;ABBAB&#x27;</span>:<span class="string">&#x27;N&#x27;</span>,<span class="string">&#x27;ABBBA&#x27;</span>:<span class="string">&#x27;O&#x27;</span>,<span class="string">&#x27;ABBBB&#x27;</span>:<span class="string">&#x27;P&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;BAAAA&#x27;</span>:<span class="string">&#x27;Q&#x27;</span>,<span class="string">&#x27;BAAAB&#x27;</span>:<span class="string">&#x27;R&#x27;</span>,<span class="string">&#x27;BAABA&#x27;</span>:<span class="string">&#x27;S&#x27;</span>,<span class="string">&#x27;BAABB&#x27;</span>:<span class="string">&#x27;T&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;BABAA&#x27;</span>:<span class="string">&#x27;U&#x27;</span>,<span class="string">&#x27;BABAB&#x27;</span>:<span class="string">&#x27;V&#x27;</span>,<span class="string">&#x27;BABBA&#x27;</span>:<span class="string">&#x27;W&#x27;</span>,<span class="string">&#x27;BABBB&#x27;</span>:<span class="string">&#x27;X&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;BBAAA&#x27;</span>:<span class="string">&#x27;Y&#x27;</span>,<span class="string">&#x27;BBAAB&#x27;</span>:<span class="string">&#x27;Z&#x27;</span>,<span class="string">&#x27;BBBBB&#x27;</span>:<span class="string">&#x27; &#x27;</span> </span><br><span class="line">&#125;</span><br><span class="line">    result=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(text),<span class="number">5</span>):</span><br><span class="line">        chunk=text[i:i+<span class="number">5</span>]</span><br><span class="line">        result.append(peigen[chunk])</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(result)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CryptoApp</span>(tk.Tk):</span><br><span class="line">    <span class="comment">#跟上一份一样，定一个类来做gui组件，需要什么部分上网查一下</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">super</span>().__init__()</span><br><span class="line">        <span class="variable language_">self</span>.title(<span class="string">&quot;ATFlags加解密工具v1.1&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.geometry(<span class="string">&quot;680x500&quot;</span>)</span><br><span class="line">        <span class="comment"># 创建界面组件</span></span><br><span class="line">        <span class="variable language_">self</span>.create_widgets()</span><br><span class="line">        <span class="variable language_">self</span>.check_environment()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_widgets</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;创建所有界面组件&quot;&quot;&quot;</span></span><br><span class="line">        <span class="comment"># 输入区域</span></span><br><span class="line">        input_frame = ttk.LabelFrame(<span class="variable language_">self</span>, text=<span class="string">&quot;输入区&quot;</span>, padding=<span class="number">10</span>)</span><br><span class="line">        input_frame.grid(row=<span class="number">0</span>, column=<span class="number">0</span>, padx=<span class="number">10</span>, pady=<span class="number">5</span>, sticky=<span class="string">&quot;nsew&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.input_text = tk.Text(input_frame, height=<span class="number">8</span>, width=<span class="number">60</span>, font=(<span class="string">&#x27;Consolas&#x27;</span>, <span class="number">10</span>))</span><br><span class="line">        <span class="variable language_">self</span>.input_text.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># 控制面板</span></span><br><span class="line">        control_frame = ttk.Frame(<span class="variable language_">self</span>)</span><br><span class="line">        control_frame.grid(row=<span class="number">1</span>, column=<span class="number">0</span>, padx=<span class="number">10</span>, pady=<span class="number">5</span>, sticky=<span class="string">&quot;ew&quot;</span>)</span><br><span class="line">        <span class="comment"># 模式选择</span></span><br><span class="line">        <span class="variable language_">self</span>.mode_var = tk.StringVar(value=<span class="string">&quot;凯撒加密&quot;</span>)</span><br><span class="line">        mode_menu = ttk.OptionMenu(</span><br><span class="line">            control_frame, <span class="variable language_">self</span>.mode_var,</span><br><span class="line">            <span class="string">&quot;凯撒加密&quot;</span>,</span><br><span class="line">            <span class="string">&quot;凯撒加密&quot;</span>, <span class="string">&quot;凯撒解密&quot;</span>,</span><br><span class="line">            <span class="string">&quot;摩斯加密&quot;</span>, <span class="string">&quot;摩斯解密&quot;</span>,</span><br><span class="line">            <span class="string">&quot;培根加密&quot;</span>, <span class="string">&quot;培根解密&quot;</span>,</span><br><span class="line">            command=<span class="variable language_">self</span>.update_ui</span><br><span class="line">        )</span><br><span class="line">        mode_menu.pack(side=tk.LEFT, padx=<span class="number">5</span>)</span><br><span class="line">        <span class="comment"># 位移量输入</span></span><br><span class="line">        <span class="variable language_">self</span>.shift_frame = ttk.Frame(control_frame)</span><br><span class="line">        ttk.Label(<span class="variable language_">self</span>.shift_frame, text=<span class="string">&quot;位移量:&quot;</span>).pack(side=tk.LEFT)</span><br><span class="line">        <span class="variable language_">self</span>.shift_spin = ttk.Spinbox(</span><br><span class="line">            <span class="variable language_">self</span>.shift_frame, </span><br><span class="line">            from_=<span class="number">0</span>, </span><br><span class="line">            to=<span class="number">25</span>, </span><br><span class="line">            width=<span class="number">5</span>,</span><br><span class="line">            validate=<span class="string">&quot;key&quot;</span>,</span><br><span class="line">            validatecommand=(<span class="variable language_">self</span>.register(<span class="variable language_">self</span>.validate_shift), <span class="string">&#x27;%P&#x27;</span>)</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.shift_spin.<span class="built_in">set</span>(<span class="number">3</span>)</span><br><span class="line">        <span class="variable language_">self</span>.shift_spin.pack(side=tk.LEFT)</span><br><span class="line">        <span class="variable language_">self</span>.shift_frame.pack(side=tk.LEFT, padx=<span class="number">10</span>)</span><br><span class="line">        <span class="variable language_">self</span>.shift_frame.pack_forget()</span><br><span class="line">        <span class="comment"># 执行按钮</span></span><br><span class="line">        ttk.Button(</span><br><span class="line">            control_frame, </span><br><span class="line">            text=<span class="string">&quot;执 行&quot;</span>, </span><br><span class="line">            command=<span class="variable language_">self</span>.process, </span><br><span class="line">            style=<span class="string">&quot;Accent.TButton&quot;</span></span><br><span class="line">        ).pack(side=tk.RIGHT)</span><br><span class="line">        <span class="comment"># 结果输出</span></span><br><span class="line">        output_frame = ttk.LabelFrame(<span class="variable language_">self</span>, text=<span class="string">&quot;输出区&quot;</span>, padding=<span class="number">10</span>)</span><br><span class="line">        output_frame.grid(row=<span class="number">2</span>, column=<span class="number">0</span>, padx=<span class="number">10</span>, pady=<span class="number">5</span>, sticky=<span class="string">&quot;nsew&quot;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.output_text = tk.Text(</span><br><span class="line">            output_frame, </span><br><span class="line">            height=<span class="number">8</span>, </span><br><span class="line">            width=<span class="number">60</span>, </span><br><span class="line">            state=tk.DISABLED,</span><br><span class="line">            font=(<span class="string">&#x27;Consolas&#x27;</span>, <span class="number">10</span>)</span><br><span class="line">        )</span><br><span class="line">        <span class="variable language_">self</span>.output_text.pack(fill=tk.BOTH, expand=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># 配置行列权重</span></span><br><span class="line">        <span class="variable language_">self</span>.grid_rowconfigure(<span class="number">0</span>, weight=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.grid_rowconfigure(<span class="number">2</span>, weight=<span class="number">1</span>)</span><br><span class="line">        <span class="variable language_">self</span>.grid_columnconfigure(<span class="number">0</span>, weight=<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">validate_shift</span>(<span class="params">self, value</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;验证位移量输入&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">if</span> value == <span class="string">&quot;&quot;</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span> &lt;= <span class="built_in">int</span>(value) &lt;= <span class="number">25</span></span><br><span class="line">        <span class="keyword">except</span> ValueError:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">update_ui</span>(<span class="params">self, *args</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;根据选择的模式更新界面&quot;&quot;&quot;</span></span><br><span class="line">        mode = <span class="variable language_">self</span>.mode_var.get()</span><br><span class="line">        <span class="keyword">if</span> mode <span class="keyword">in</span> [<span class="string">&quot;凯撒加密&quot;</span>, <span class="string">&quot;凯撒解密&quot;</span>]:</span><br><span class="line">            <span class="variable language_">self</span>.shift_frame.pack(side=tk.LEFT, padx=<span class="number">10</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="variable language_">self</span>.shift_frame.pack_forget()</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">process</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;执行加解密操作&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 获取输入内容</span></span><br><span class="line">            input_content = <span class="variable language_">self</span>.input_text.get(<span class="string">&quot;1.0&quot;</span>, tk.END).strip()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> input_content:</span><br><span class="line">                <span class="keyword">raise</span> ValueError(<span class="string">&quot;输入内容不能为空&quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 执行对应操作</span></span><br><span class="line">            mode = <span class="variable language_">self</span>.mode_var.get()</span><br><span class="line">            <span class="keyword">if</span> mode <span class="keyword">in</span> [<span class="string">&quot;凯撒加密&quot;</span>, <span class="string">&quot;凯撒解密&quot;</span>]:</span><br><span class="line">                shift = <span class="built_in">int</span>(<span class="variable language_">self</span>.shift_spin.get())</span><br><span class="line">                result = kaisa(input_content, shift) <span class="keyword">if</span> mode == <span class="string">&quot;凯撒加密&quot;</span> <span class="keyword">else</span> jiemikaisa(input_content, shift)</span><br><span class="line">            <span class="keyword">elif</span> mode == <span class="string">&quot;摩斯加密&quot;</span>:</span><br><span class="line">                result = mose1(input_content)</span><br><span class="line">            <span class="keyword">elif</span> mode == <span class="string">&quot;摩斯解密&quot;</span>:</span><br><span class="line">                result = jiemimose(input_content)</span><br><span class="line">            <span class="keyword">elif</span> mode == <span class="string">&quot;培根加密&quot;</span>:</span><br><span class="line">                result = peigen(input_content)</span><br><span class="line">            <span class="keyword">elif</span> mode == <span class="string">&quot;培根解密&quot;</span>:</span><br><span class="line">                result = jiemipeigen(input_content)</span><br><span class="line"></span><br><span class="line">            <span class="comment"># 显示结果</span></span><br><span class="line">            <span class="variable language_">self</span>.output_text.config(state=tk.NORMAL)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.delete(<span class="string">&quot;1.0&quot;</span>, tk.END)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.insert(tk.END, result)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.config(state=tk.DISABLED)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            messagebox.showerror(<span class="string">&quot;错误&quot;</span>, <span class="string">f&quot;操作失败: <span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.config(state=tk.NORMAL)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.delete(<span class="string">&quot;1.0&quot;</span>, tk.END)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.insert(tk.END, <span class="string">&quot;出现错误，请检查输入！&quot;</span>)</span><br><span class="line">            <span class="variable language_">self</span>.output_text.config(state=tk.DISABLED)</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">check_environment</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;检查运行环境&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="comment"># 测试Tkinter组件是否正常工作</span></span><br><span class="line">            test_button = ttk.Button(<span class="variable language_">self</span>, text=<span class="string">&quot;环境测试&quot;</span>)</span><br><span class="line">            test_button.destroy()</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            messagebox.showerror(<span class="string">&quot;环境错误&quot;</span>, </span><br><span class="line">                <span class="string">f&quot;GUI环境初始化失败：<span class="subst">&#123;<span class="built_in">str</span>(e)&#125;</span>\n&quot;</span></span><br><span class="line">                <span class="string">&quot;请确认：\n&quot;</span></span><br><span class="line">                <span class="string">&quot;1. 正在使用Python标准环境\n&quot;</span></span><br><span class="line">                <span class="string">&quot;2. 安装了Tkinter支持\n&quot;</span></span><br><span class="line">                <span class="string">&quot;3. 显示器配置正确（服务器环境需要虚拟显示）&quot;</span></span><br><span class="line">            )</span><br><span class="line">            <span class="variable language_">self</span>.destroy()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app=CryptoApp()</span><br><span class="line">    app.mainloop()</span><br></pre></td></tr></table></figure>
<p>我写个蛋的GUI，我早密码</p>
<blockquote>
<p>过时的加密和技术，FJUT，你稳了</p>
</blockquote>
<h4 id="第五题，LSB隐写，这个我不会，没话说"><a href="#第五题，LSB隐写，这个我不会，没话说" class="headerlink" title="第五题，LSB隐写，这个我不会，没话说"></a>第五题，LSB隐写，这个我不会，没话说</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#网安2402-24-曹楚涵</span></span><br><span class="line"><span class="comment">#LSB隐写在misc中很常见，但是一般都是当作最简单的签到题，我们也一般是用工具一把梭，但是这里得自己写一个脚本</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="comment">#先讲一下LSB隐写术吧</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">图片中的图像像素一般是由RGB三原色（红绿蓝）组成，每一种颜色占用8位，取值范围为0x00~0xFF，即有256种颜色，一共包含了256的3次方的颜色，即16777216种颜色。而人类的眼睛可以区分约1000万种不同的颜色，这就意味着人类的眼睛无法区分余下的颜色大约有6777216种。</span></span><br><span class="line"><span class="string">LSB隐写就是修改RGB颜色分量的最低二进制位也就是最低有效位（LSB），而人类的眼睛不会注意到这前后的变化，每个像数可以携带3比特的信息。</span></span><br><span class="line"><span class="string">#做这个方向的题目，经常用的就是stegsolve，后面我也会用这个来看一下我生成的隐写图是不是正确的</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">message_to_bits</span>(<span class="params">message</span>):</span><br><span class="line">    <span class="comment">#这里是将字符串消息转换成比特流，然后用一个列表来储存0/1比特</span></span><br><span class="line">    bits=[]</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> message:</span><br><span class="line">        binval=<span class="built_in">format</span>(<span class="built_in">ord</span>(char),<span class="string">&#x27;08b&#x27;</span>)<span class="comment">#按照LSB的原理，每个字符都要编成8位二进制字符串，不会产生过多或过少的情况</span></span><br><span class="line">        bits.extend([<span class="built_in">int</span>(bit) <span class="keyword">for</span> bit <span class="keyword">in</span> binval])</span><br><span class="line">    bits.extend([<span class="number">0</span>]*<span class="number">8</span>)<span class="comment">#这里是要添加一个结束的标志</span></span><br><span class="line">    <span class="keyword">return</span> bits</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">bits_to_message</span>(<span class="params">bits</span>):</span><br><span class="line">    <span class="comment">#就是第一个函数反过来，比特流转字节，遇到八个0的时候自动停止</span></span><br><span class="line">    chars=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>,<span class="built_in">len</span>(bits),<span class="number">8</span>):</span><br><span class="line">        byte=bits[i:i+<span class="number">8</span>]</span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">len</span>(byte)&lt;<span class="number">8</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        value=<span class="built_in">int</span>(<span class="string">&#x27;&#x27;</span>.join(<span class="built_in">str</span>(bit) <span class="keyword">for</span> bit <span class="keyword">in</span> byte),<span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> value==<span class="number">0</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        chars.append(<span class="built_in">chr</span>(value))</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join(chars)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">encode_image</span>(<span class="params">input_image_path,output_image_path,message</span>):</span><br><span class="line">    <span class="comment">#我这个函数就是用RGB模式打开图片，然后获取所有的像素，后面用列表来保存，然后检查消息能不能写入图片，最后修改最低位，一个一个像素和通道的写入比特流，然后保存</span></span><br><span class="line">    img=Image.<span class="built_in">open</span>(input_image_path)</span><br><span class="line">    <span class="keyword">if</span> img.mode!=<span class="string">&#x27;RGB&#x27;</span>:</span><br><span class="line">        img=img.convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line">    pixels=<span class="built_in">list</span>(img.getdata())</span><br><span class="line">    bits=message_to_bits(message)</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(bits)&gt;<span class="built_in">len</span>(pixels)*<span class="number">3</span>:</span><br><span class="line">        <span class="keyword">raise</span> ValueError(<span class="string">&quot;Message too large to encode in image.&quot;</span>)</span><br><span class="line">    new_pixels=[]</span><br><span class="line">    bit_idx=<span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> pixel <span class="keyword">in</span> pixels:</span><br><span class="line">        r,g,b=pixel</span><br><span class="line">        <span class="keyword">if</span> bit_idx&lt;<span class="built_in">len</span>(bits):</span><br><span class="line">            r=(r&amp;~<span class="number">1</span>)|bits[bit_idx]</span><br><span class="line">            bit_idx+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> bit_idx&lt;<span class="built_in">len</span>(bits):</span><br><span class="line">            g=(g&amp;~<span class="number">1</span>)|bits[bit_idx]</span><br><span class="line">            bit_idx+=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> bit_idx&lt;<span class="built_in">len</span>(bits):</span><br><span class="line">            b=(b&amp;~<span class="number">1</span>)|bits[bit_idx]</span><br><span class="line">            bit_idx+=<span class="number">1</span></span><br><span class="line">        new_pixels.append((r,g,b))</span><br><span class="line">    img.putdata(new_pixels)</span><br><span class="line">    img.save(output_image_path)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Encoded message and saved to<span class="subst">&#123;output_image_path&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">decode_image</span>(<span class="params">input_image_path</span>):</span><br><span class="line">    <span class="comment">#这个就是一个很简单的解码脚本，提取每个通道的最低位，拼成比特流，然后还原成字符串</span></span><br><span class="line">    img=Image.<span class="built_in">open</span>(input_image_path)</span><br><span class="line">    <span class="keyword">if</span> img.mode!=<span class="string">&#x27;RGB&#x27;</span>:</span><br><span class="line">        img=img.convert(<span class="string">&#x27;RGB&#x27;</span>)</span><br><span class="line">    pixels=<span class="built_in">list</span>(img.getdata())</span><br><span class="line">    bits=[]</span><br><span class="line">    <span class="keyword">for</span> pixel <span class="keyword">in</span> pixels:</span><br><span class="line">        <span class="keyword">for</span> channel <span class="keyword">in</span> pixel[:<span class="number">3</span>]:</span><br><span class="line">            bits.append(channel&amp;<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> bits_to_message(bits)</span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment">#主函数就不多说了</span></span><br><span class="line">    original_img=<span class="string">&#x27;关系网络.png&#x27;</span><span class="comment">#西游记的关系图是png而且也在这个目录下，我就直接抓过来用了</span></span><br><span class="line">    stego_img=<span class="string">&#x27;LSB隐写.png&#x27;</span></span><br><span class="line">    secret_message=<span class="string">&#x27;flag&#123;KFC crazy Thursday vivo50&#125;&#x27;</span></span><br><span class="line">    encode_image(original_img,stego_img,secret_message)</span><br><span class="line">    extracted_message=decode_image(stego_img)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;提取的隐藏信息:&quot;</span>,extracted_message)</span><br></pre></td></tr></table></figure>
<p>&lt;参考博客<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38154820/article/details/122694645%3E">https://blog.csdn.net/qq_38154820/article/details/122694645&gt;</a></p>
<h4 id="总结：最近屎吃多了，不太会说话了"><a href="#总结：最近屎吃多了，不太会说话了" class="headerlink" title="总结：最近屎吃多了，不太会说话了"></a>总结：最近屎吃多了，不太会说话了</h4>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB/" rel="tag"># 日常生活</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2025/04/29/Docker%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/" rel="prev" title="Docker基础使用">
      <i class="fa fa-chevron-left"></i> Docker基础使用
    </a></div>
      <div class="post-nav-item">
    <a href="/2025/05/15/%E5%9F%BA%E4%BA%8Eflask%E7%9A%84session%E4%BC%AA%E9%80%A0/" rel="next" title="基于flask的session伪造">
      基于flask的session伪造 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#bro%E8%BF%99%E4%B9%88%E4%B9%85%E4%B8%8D%E6%9B%B4%E6%96%B0%EF%BC%8C%E4%B8%8D%E7%BB%83%E9%A2%98%EF%BC%8C%E6%98%AF%E5%8E%BB%E5%81%9A%E4%BB%80%E4%B9%88%E5%8E%BB%E4%BA%86%EF%BC%8C%E5%8E%9F%E6%9D%A5%E6%98%AF%E5%8E%BB%E5%81%9Abeyond-python%E5%A4%A7%E4%BD%9C%E4%B8%9A%E5%8E%BB%E4%BA%86%EF%BC%8C%E7%BD%A2%E4%BA%86%E7%BD%A2%E4%BA%86%EF%BC%8C%E6%9D%A5%E7%9C%8B%E7%9C%8B%E6%88%90%E6%9E%9C%E5%90%A7"><span class="nav-number">1.</span> <span class="nav-text">bro这么久不更新，不练题，是去做什么去了，原来是去做beyond python大作业去了，罢了罢了，来看看成果吧</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%80%E9%A2%98%EF%BC%8C%E7%99%BE%E5%BA%A6%E5%9B%BE%E7%89%87%E7%88%AC%E8%99%AB-%E8%BF%99%E4%B8%AA%E5%96%B7%E4%B8%8D%E4%BA%86%EF%BC%8C%E5%8F%AA%E8%A6%81%E5%9C%A8%E6%A1%86%E6%9E%B6%E4%B8%8A%E6%94%B9%E6%94%B9%E5%B0%B1%E5%8F%AF%E4%BB%A5-%E5%9B%A0%E4%B8%BA%E6%87%92%EF%BC%8C%E4%B8%80%E7%9B%B4%E6%B2%A1%E5%86%99%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="nav-number">1.1.</span> <span class="nav-text">第一题，百度图片爬虫,这个喷不了，只要在框架上改改就可以(因为懒，一直没写多线程)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%BA%8C%E9%A2%98GUI%E5%BA%93%E7%BC%96%E5%86%99%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E5%AE%9E%E7%8E%B0%E7%8C%9C%E5%AD%97%E8%B0%9C%E5%B0%8F%E6%B8%B8%E6%88%8F%EF%BC%88%E8%BF%99%E4%B8%AA%E6%98%AF%E6%88%91%E6%9C%80%E6%83%B3%E5%96%B7%E7%9A%84%EF%BC%8C%E5%AF%86%E7%A0%81%E7%9A%84%EF%BC%8C%E9%82%A3%E4%B9%88%E5%A4%9A%E5%86%85%E5%AE%B9%EF%BC%8C%E7%A1%AC%E5%86%99%E6%98%AF%E5%90%A7%EF%BC%8C%E6%9C%89%E7%82%B9%E6%84%8F%E6%80%9D%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">第二题GUI库编写图形化界面实现猜字谜小游戏（这个是我最想喷的，密码的，那么多内容，硬写是吧，有点意思）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%B8%89%E9%A2%98%EF%BC%8C%E8%A5%BF%E6%B8%B8%E8%AE%B0%E7%94%BB%E8%AF%8D%E4%BA%91%E5%9B%BE%E5%92%8C%E4%BA%BA%E7%89%A9%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="nav-number">1.3.</span> <span class="nav-text">第三题，西游记画词云图和人物关系图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E5%9B%9B%E9%A2%98%EF%BC%8CGUI%E7%95%8C%E9%9D%A2%E5%AE%9E%E7%8E%B0%E4%B8%89%E7%A7%8D%E5%8A%A0%E8%A7%A3%E5%AF%86"><span class="nav-number">1.4.</span> <span class="nav-text">第四题，GUI界面实现三种加解密</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AC%AC%E4%BA%94%E9%A2%98%EF%BC%8CLSB%E9%9A%90%E5%86%99%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%88%91%E4%B8%8D%E4%BC%9A%EF%BC%8C%E6%B2%A1%E8%AF%9D%E8%AF%B4"><span class="nav-number">1.5.</span> <span class="nav-text">第五题，LSB隐写，这个我不会，没话说</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%80%BB%E7%BB%93%EF%BC%9A%E6%9C%80%E8%BF%91%E5%B1%8E%E5%90%83%E5%A4%9A%E4%BA%86%EF%BC%8C%E4%B8%8D%E5%A4%AA%E4%BC%9A%E8%AF%B4%E8%AF%9D%E4%BA%86"><span class="nav-number">1.6.</span> <span class="nav-text">总结：最近屎吃多了，不太会说话了</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="3a0-Eminem"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">3a0-Eminem</p>
  <div class="site-description" itemprop="description">No Human is Limited</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:eminemgcxwlp@gmail.com" title="E-Mail → mailto:eminemgcxwlp@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2025\4\21 – 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">3a0-Eminem</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>


  















  

  

</body>
</html>
